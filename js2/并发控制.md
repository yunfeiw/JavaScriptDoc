###并发数控制

```

/**
*@Function:constructor: 初始化
*@Function: call 绑定事件
*@Function：createHandle 事件执行
*/

class Concurrent{
    constructor(obj){
        this.MAX = obj.MAX; //最大并发数
        this.count = 0; //任务数
        this.taskStack = []; //任务栈
    }
    call(item,arg){
        return new Promise((resolve,reject)=>{
            const tack = this.createHandle(item.arg,resolve,reject);
            if(this.count < this.MAX){
                tack();
            }else{
                this.taskStack.push(tack);
            }
        });
    }
    createHandle(item,arg,resolve,reject){
        return ()=>{
            this.count++;
            item(arg).then(resolve).catch(reject).finally(()=>{
                this.count --;
                if(this.tackStack.length){
                    const stack = this.tackStack.shift();
                    stack();
                }
            })
        }
    }
}

```

### 词法作用域

“作用域”定义为一套规则，这套规则用来管理引擎如何在当前作用域以及嵌套的子作用域中根据标识符名称进行变量查找。

作用域共有两种主要的工作模型。第一张最为普遍，被大多数编程语言所采用的词法作用域，我们会对这种作用域进行深入讨论。另一种叫做动态作用域，仍有一些编程语言在使用（比如Bash脚本、Perl中的一些模式等）

2.1 词法阶段

大部分标准怨言编译器的第一个工作阶段叫做词法化（也叫单词化）。回忆一下，词法化的过程会对源代码中的字符进行检查，如果是有状态的解析过程，还会赋予单词语义。

这个概念是理解词法作用域及其名称来历的基础。

简单来书，词法作用域就是第一在词法阶段的作用域。换句话说，词法作用域是由你在写代码时将变量和块作用域写在哪里来决定的，因此当词法分析器处理代码时会保持作用域不变。


#### 词法作用域

词法作用域意味着作用域是由书写代码时函数申明的位置来决定的。编译的词法分析阶段基本能够知道全部标识符在哪里以及如何声明的，从而能够预测到执行过程中如何对他们进行查找

javaScript中有两个机制可以“欺骗”词法作用域；eval(...)和with.前者可以对一段包含一个或多个声明的“代码”字符串进行盐酸，并借此来修改已经存在的词法作用与（在运行时）。后者本质上是通过将一个对象的引用当作作用域来处理，将对象的属性当做作用域中的标识符来处理。从而创建了一个新的词法作用域（同样是在运行时）；

这两个机制的副作用是 引擎无法在编译时对作用域查找进行优化，因为引擎只能谨慎地认为这样的优化是无效的。使用这其中任何一个机制都将导致代码运行编码。不要使用然呢